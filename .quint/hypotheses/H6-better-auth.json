{
  "id": "H6",
  "title": "Better Auth with Supabase Adapter",
  "approach": "Progressive",
  "layer": "L0",
  "status": "CONDITIONAL",
  "deduction": "CONDITIONAL",
  "fv_score": 2,
  "kind": "system",
  "created_at": "2025-12-26T10:00:00Z",
  "scope": "Broker authentication, decoupled auth layer",
  "content": {
    "method": [
      "1. Install better-auth package",
      "2. Configure with Supabase database adapter",
      "3. Create /api/auth/[...all]/route.ts handler",
      "4. Implement custom email domain validation middleware",
      "5. Create session middleware for protected routes",
      "6. Manual RLS integration via JWT claims in Supabase policies",
      "7. Create auth context provider for React"
    ],
    "expected_outcome": "Modern TypeScript-first auth with flexible provider support"
  },
  "rationale": {
    "anomaly": "No authentication - anyone can view any deal",
    "approach": "Use modern Better Auth library for TypeScript-first DX",
    "alternatives_rejected": [
      "Supabase Auth - simpler but less flexible"
    ]
  },
  "dependencies": ["better-auth"],
  "evidence": [],
  "concerns": [
    "Adds new dependency when Supabase Auth already available",
    "Manual RLS integration - no native auth.uid()",
    "More boilerplate for equivalent functionality"
  ]
}
